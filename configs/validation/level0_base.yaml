# Level 0 base SHINE config â€” noiseless sanity check
# Parameters matched to esheldon/ngmix metacal example:
#   https://github.com/esheldon/ngmix/blob/master/examples/metacal/metacal.py
#
# Differences from metacal example:
#   - PSF ellipticity (g1=0.02, g2=-0.01 on PSF) not supported yet; using round PSF
#   - Galaxy position fixed at center (metacal uses random subpixel offsets)
#   - Flux=1000 in SHINE prior; data generated with flux=1 matching metacal default

image:
  pixel_scale: 0.263     # arcsec/pixel (LSST-like, matches metacal)
  size_x: 48
  size_y: 48
  n_objects: 1
  fft_size: 128
  noise:
    type: Gaussian
    sigma: 1.0e-6         # Effectively noiseless (matches metacal default)

psf:
  type: Moffat
  sigma: 0.9              # FWHM in arcsec (matches metacal psf_fwhm=0.9)
  beta: 2.5               # Moffat beta (matches metacal)

gal:
  type: Exponential
  flux: 1.0
  half_light_radius: 0.5  # arcsec (matches metacal gal_hlr=0.5)
  shear:
    type: G1G2
    g1:
      type: Normal
      mean: 0.0            # Prior center; truth (0.01) set via bias run config
      sigma: 0.05
    g2:
      type: Normal
      mean: 0.0            # Prior center; truth (0.00) set via bias run config
      sigma: 0.05
  position:
    type: Uniform
    x_min: 23.5
    x_max: 24.5
    y_min: 23.5
    y_max: 24.5

inference:
  method: map               # MAP is sufficient for noiseless Level 0
  map_config:
    num_steps: 200
    learning_rate: 0.1
  rng_seed: 42
